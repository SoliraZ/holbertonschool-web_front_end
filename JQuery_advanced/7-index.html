<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

    <meta charset="utf-8" />
    <title>Task 0</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

</head>

<body>

    <script type="application/javascript">
        function createSearchForm() {
            const form = $('<form>');
            const searchInput = $('<input>').attr('type', 'text');
            const submitInput = $('<input>').attr('type', 'submit');
            const resultsList = $('<ul>');

            form.append(searchInput, submitInput);

            $('body').prepend(form);
            form.before(resultsList);

            form.on('submit', function (event) {
                event.preventDefault();
                const search = $('input:first').val();
                if (search.trim().length === 0) {
                    return;
                }
                queryWikipedia(search);
            });
        }

        function addNewArticle(id, title, snippet) {
            const listItem = $('<li>');
            const firstParagraph = $('<p>');
            const secondParagraph = $('<p>');

            firstParagraph.append(
                $('<span>').text(id + ' - '),
                $('<b>').text(title)
            );

            secondParagraph.html(snippet);

            listItem.append(firstParagraph, secondParagraph);
            $('ul').append(listItem);
        }

        function queryWikipedia(search) {
            const endpoint = 'https://en.wikipedia.org/w/api.php';
            const data = {
                action: 'query',
                list: 'search',
                srsearch: search,
                format: 'json',
                origin: '*'
            };

            // Clear previous results
            $('ul').empty();

            $.ajax({
                url: endpoint,
                data: data,
                dataType: 'json',
                type: 'GET',
                success: function (response) {
                    if (response && response.query && response.query.search) {
                        response.query.search.forEach(function (result) {
                            addNewArticle(
                                String(result.pageid),
                                result.title,
                                result.snippet
                            );
                        });
                    }
                }
            });
        }

        $(document).ready(function () {
            createSearchForm();
        });
    </script>

</body>

</html>